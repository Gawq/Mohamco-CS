## 운영체제의 역할과 구조

**역할**

- CPU 스케줄링과 프로세스 관리

CPU 소유권을 어떤 프로세스에 할당할지, 프로세스의 생성과 삭제, 자원 할당 및 반환을 관리한다.

- 메모리 관리

메모리를 어떤 프로세스에 얼만큼 할당할지 관리한다.

- 디스크 파일 관리

디스크 파일을 어떤 방법으로 보관할지 관리한다.

- I/O 디바이스 관리

입출력 장치와 컴퓨터 간에 데이터를 주고받는 것을 관리한다.

**구조**

유저 프로그램 

GUI —————\

시스템콜 ———-\

커널 ——————- 운영체제

드라이버————/

하드웨어

- 드라이버

하드웨어를 제어하기 위한 소프트웨어

- 시스템콜

운영체제가 커널에 접근하기 위한 인터페이스이며 유저 프로그램이 운영체제의 서비스를 받기 위해 커널 함수를 호출할 때 쓴다.

유저 프로그램이 I/O 요청으로 트랩(trap)을 발동하면 올바른 I/O 요청인지 확인한 후 유저 모드가 시스템 콜을 통해 커널 모드로 변환되어 실행된다.

유저 프로그램에서 파일 시스템의 파일을 읽으려는 함수를 호출했다고 해보자

이 때 유저 모드에서 파일을 읽지 않고 시스템 콜을 통해 커널 모드로 들어가 파일을 읽고 다시 유저 모드로 돌아와 로직을 실행한다.

→ 시스템 콜을 통해 커널 모드로 변환되기 때문에 컴퓨터 자원에 대한 직접 접근을 차단할 수 있고 프로그램을 다른 프로그램으로부터 보호할 수 있다.

이처럼 프로세스나 스레드에서 운영체제로 어떠한 요청을 할 때 시스템 콜이라는 인터페이스와 커널을 거쳐 운영체제에 전달된다.

시스템콜이 작동될 때 유저 모드와 커널 모드를 구분하기 위해 modebit이라는 플래그 변수를 가진다.

0은 커널 모드, 1은 유저 모드로 설정된다.
