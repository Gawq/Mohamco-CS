# 0. 네트워크 기기

네트워크는 여러 개의 네트워크 기기를 기반으로 구축된다.

# 1. 네트워크 기기의 처리 범위

네트워크 기기는 계층별로 처리 범위를 나눌 수 있다.

1. 물리 계층을 처리할 수 있는 기기
2. 데이터 링크 계층을 처리할 수 있는 기기
3. 그 외...

상위 계층은 하위 계층을 처리할 수 있는데 그 반대는 불가능하다.

- 애플리케이션 계층: L7
- 인터넷 계층: L3
- 데이터 링크 계층: L2, 브리지
- 물리 계층: NIC, 리피터, AP

# 2. 애플리케이션 계층을 처리하는 기기

애플리케이션 계층을 처리하는 기기로는 L7 스위치가 있다.

## L7 스위치 (로드밸런서)

스위치는 여러 장비를 연결하고 데이터 통신을 중재하며 목적지가 연결된 포트로만 전기신호를 보내 데이터를 전송하는 통신 네트워크 장비이다.

**역할**

1. 서버의 부하를 분산시킴
2. 클라이언트로부터 오는 요청들을 뒤쪽의 여러 서버로 나눠 트래픽 증가를 목표로 함
3. URL, 서버, 캐시, 쿠키들을 기반으로 트래픽을 분산
4. 바이러스 등 불필요한 외부 데이터 등을 필터링
5. 응용 프로그램 수준의 트래픽 모니터링 가능
6. 장애 서버들을 제외하기 위해 정기적인 헬스 체크로 감시

### L4 스위치와 L7 스위치의 차이

L4 스위치는 전송 계층을 처리하는 기기로 스트리밍 관련 서비스에서는 사용 불가능. IP와 포트를 기반으로 트래픽을 분산한다.

L7 스위치는 IP, 포트 외에도 URL, HTTP, 헤더, 쿠키 등을 기반으로 트래픽을 분산한다.

### 헬스 체크

L4, L7 스위치 모두 헬스 체크를 통해 정상적인 서버 또는 비정상적인 서버를 판멸한다. 전송 주기와 재전송 횟수 등을 설정한 이후 반복적으로 서버에 요청을 보낸다.

### 로드밸런서를 이용한 서버 이중화

로드밸런서의 대표적인 기능이다. 2대 이상의 서버를 둬 서버 1대가 종료가 되더라도 다른 1대로 인해 안정적으로 서비스를 운영하게 해준다.
